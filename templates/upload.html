{% extends "layout.html" %}

{% block title %}Analyse et Nettoyage de Fichiers{% endblock %}

{% block content %}
<div class="space-y-12">
    <!-- Section 1: Analyse de Fichier -->
    <div class="p-8 bg-white border border-gray-200 rounded-2xl shadow-sm">
        <h2 class="text-2xl font-semibold text-gray-900 mb-1">1. Analyser un Fichier</h2>
        <p class="text-gray-600 mb-6">Obtenez un résumé des erreurs d'un `errpt.out` ou les informations système d'un `general.snap`.</p>
        
        <form method="post" enctype="multipart/form-data" class="space-y-4" id="form-analyze">
            <div>
                <label for="file-analyze" class="block text-sm font-medium text-gray-700 mb-1">Fichier à analyser :</label>
                <input type="file" name="file" id="file-analyze" class="block w-full text-sm text-gray-500
                    file:mr-4 file:py-2 file:px-4
                    file:rounded-full file:border-0
                    file:text-sm file:font-semibold
                    file:bg-indigo-50 file:text-indigo-700
                    hover:file:bg-indigo-100" required>
            </div>
            <div class="text-right">
                <button type="submit" name="analyze_button" class="inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                    Lancer l'Analyse
                </button>
            </div>
        </form>
    </div>

    <!-- Section 2: Nettoyage de Fichier (Général) -->
    <div class="p-8 bg-white border border-gray-200 rounded-2xl shadow-sm">
        <h2 class="text-2xl font-semibold text-gray-900 mb-1">2. Nettoyer un Fichier `errpt.out` (Standard)</h2>
        <p class="text-gray-600 mb-6">Supprime les blocs "Detail Data" et "Sense Data" d'un fichier `errpt.out` pour le rendre plus lisible.</p>
        
        <form method="post" enctype="multipart/form-data" class="space-y-4" id="form-clean">
            <div>
                <label for="file-clean" class="block text-sm font-medium text-gray-700 mb-1">Fichier errpt.out à nettoyer :</label>
                <input type="file" name="file" id="file-clean" class="block w-full text-sm text-gray-500
                    file:mr-4 file:py-2 file:px-4
                    file:rounded-full file:border-0
                    file:text-sm file:font-semibold
                    file:bg-teal-50 file:text-teal-700
                    hover:file:bg-teal-100" required>
            </div>
            <div class="text-right">
                <button type="submit" name="clean_button" class="inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-teal-600 hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500">
                    Nettoyer et Télécharger
                </button>
            </div>
        </form>
    </div>

    <!-- Section 3: Nettoyage de Fichier (Spécifique Power 7) -->
    <div class="p-8 bg-white border border-gray-200 rounded-2xl shadow-sm">
        <h2 class="text-2xl font-semibold text-gray-900 mb-1">3. Nettoyer un `errpt.out` de Power 7</h2>
        <p class="text-gray-600 mb-6">Nettoyage spécifique qui supprime les blocs "ADDITIONAL HEX DATA" des logs Power 7.</p>
        
        <form method="post" enctype="multipart/form-data" class="space-y-4" id="form-clean-p7">
            <div>
                <label for="file-clean-p7" class="block text-sm font-medium text-gray-700 mb-1">Fichier errpt.out (Power 7) à nettoyer :</label>
                <input type="file" name="file" id="file-clean-p7" class="block w-full text-sm text-gray-500
                    file:mr-4 file:py-2 file:px-4
                    file:rounded-full file:border-0
                    file:text-sm file:font-semibold
                    file:bg-orange-50 file:text-orange-700
                    hover:file:bg-orange-100" required>
            </div>
            <div class="text-right">
                <button type="submit" name="clean_p7_button" class="inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500">
                    Nettoyer (Power 7)
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}
